<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<title>Epsilon Mobile Framework - Version 2.0</title>

<link href="styles/style.css"     		rel="stylesheet" type="text/css">
<link href="styles/colors/blue.css" 	  rel="stylesheet" type="text/css">
<link href="styles/framework.css" 		rel="stylesheet" type="text/css">
<link href="styles/swipebox.min.css"		 rel="stylesheet" type="text/css">
    <script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/jqueryui.js"></script>
<script type="text/javascript" src="scripts/jquery.swipebox.js"></script>
<script type="text/javascript" src="scripts/snap.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
<script type="text/javascript" src="scripts/framework.js"></script>
</head> 
<script>
    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        alert('Device Ready!');


        navigator.splashscreen.hide();

    }
</script>
<body>
<div class="all-elements">
    <div id="sidebar" class="page-sidebar">
        <div class="page-sidebar-scroll">
			<div class="sidebar-header">
            	<img class="sidebar-logo round-decoration" src="" alt="img">
                <h4 class="center-text temperature"></h4>
                <em class="center-text data"></em>
            </div>
            <div class="navigation-items">
                <div class="nav-item">
                    <div class="nav-item-submenu cats" style="overflow: hidden; display: block;">
                    	<div class="sidebar-decoration"></div>
                    </div>
                </div>
                <div class="sidebar-decoration"></div>
            </div>
        </div>
    </div>

    <div id="sidebar" class="page-sidebar-right">
        <div class="page-sidebar-scroll">
           <ul class="favList">

           </ul>
        </div>
    </div>


    <div id="content" class="page-content">	
    	<div class="content-controls solid-color fixed-header">
        	<a href="#" class="deploy-sidebar"></a>
            <em class="content-title"><img src='images/logo.png' style='width: 150px;margin: 0 auto;'></em>
            
        </div>    
        <div class="fixed-header-clear"></div>    
       
        
        <div class="content" id='page3'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat3">
                
            </div>
        </div>         
        
        <div class="content" id='page7' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat7">
              
            </div>
        </div>
         <div class="content" id='page11' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat11">
              
            </div>
        </div>
         <div class="content" id='page17' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat17">
              
            </div>
        </div>
         <div class="content" id='page21' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat21">
              
            </div>
        </div>
         <div class="content" id='page23' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat23">
              
            </div>
        </div>
         <div class="content" id='page25' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat25">
              
            </div>
        </div>
         <div class="content" id='page27' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat27">
              
            </div>
        </div>
         <div class="content" id='page29' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat29">
              
            </div>
        </div>
         <div class="content" id='page31' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat31">
              
            </div>
        </div>   
         <div class="content" id='page33' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat33">
              
            </div>
        </div>   
         <div class="content" id='page35' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat35">
              
            </div>
        </div>  
         <div class="content" id='page37' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat37">
              
            </div>
        </div>   
         <div class="content" id='page43' style='display:none;'>
        	<div class="decoration"></div>
            <div class="container no-bottom cat43">
              
            </div>
        </div>     

                
        <div class="content" style='display:block !important;'>
        	<div class="decoration"></div>
        	<div class="container">
                <div class="footer-socials">
                    <a href='#' onclick="window.open('https://www.facebook.com/TitlurileZilei', '_system');" rel='external' class="facebook-footer"></a>
                    <a href='#' onclick="window.open('http://www.pinterest.com/TitlurileZilei/', '_system');" rel='external' class="twitter-footer"></a>
                </div>
                <button onclick="login()">Login</button>
                <button onclick="me()">Me</button>
                <!--<button onclick="getSession()">Get session</button>-->
                <button onclick="getLoginStatus()">Get login</button>
                <button onclick="logout()">Logout</button>
                <button onclick="facebookWallPost()">facebookWallPost</button>
                <button onclick="publishStoryFriend()">friendstory</button>
                <p class="copyright uppercase center-text no-bottom">Titlurile Zilei 2013<br> All rights reserved</p>

			</div>
		</div>        
    </div>  
</div>
<div id="fb-root"></div>
<script src="cdv-plugin-fb-connect.js"></script>
<!-- facebook js sdk -->
<script src="facebook_js_sdk.js"></script>

<script>
    try {
        alert('Device is ready! Make sure you set your app_id below this alert.');
        //Put your FB APP_ID here!
        FB.init({ appId: "899133160113324", nativeInterface: CDV.FB, useCachedDialogs: false });
        document.getElementById('data').innerHTML = "";
    } catch (e) {
        alert(e);
    }
    if ((typeof cordova == 'undefined') && (typeof Cordova == 'undefined')) alert('Cordova variable does not exist. Check that you have included cordova.js correctly');
    if (typeof CDV == 'undefined') alert('CDV variable does not exist. Check that you have included cdv-plugin-fb-connect.js correctly');
    if (typeof FB == 'undefined') alert('FB variable does not exist. Check that you have included the Facebook JS SDK file.');

    FB.Event.subscribe('auth.login', function(response) {
        alert('auth.login event');
    });

    FB.Event.subscribe('auth.logout', function(response) {
        alert('auth.logout event');
    });

    FB.Event.subscribe('auth.sessionChange', function(response) {
        alert('auth.sessionChange event');
    });

    FB.Event.subscribe('auth.statusChange', function(response) {
        alert('auth.statusChange event');
    });

    /*function getSession() {
     alert("session: " + JSON.stringify(FB.getSession()));
     }
     */
    function getLoginStatus() {
        FB.getLoginStatus(function(response) {
            if (response.status == 'connected') {
                alert('logged in');
            } else {
                alert('not logged in');
            }
        });
    }
    var friendIDs = [];
    var fdata;
    function me() {
        FB.api('/me/friends', { fields: 'id, name, picture' },  function(response) {
            if (response.error) {
                alert(JSON.stringify(response.error));
            } else {
                var data = document.getElementById('data');
                fdata=response.data;
                console.log("fdata: "+fdata);
                response.data.forEach(function(item) {
                    var d = document.createElement('div');
                    d.innerHTML = "<img src="+item.picture+"/>"+item.name;
                    data.appendChild(d);
                });
            }
            var friends = response.data;
            console.log(friends.length);
            for (var k = 0; k < friends.length && k < 200; k++) {
                var friend = friends[k];
                var index = 1;

                friendIDs[k] = friend.id;
                //friendsInfo[k] = friend;
            }
            console.log("friendId's: "+friendIDs);
        });
    }

    function logout() {
        FB.logout(function(response) {
            alert('logged out');
        });
    }

    function login() {
        FB.login(
                function(response) {
                    if (response.session) {
                        alert('logged in');
                    } else {
                        alert('not logged in');
                    }
                },
                { scope: "email" }
        );
    }


    function facebookWallPost() {
        console.log('Debug 1');
        var params = {
            method: 'feed',
            name: 'Facebook Dialogs',
            link: 'https://developers.facebook.com/docs/reference/dialogs/',
            picture: 'http://fbrell.com/f8.jpg',
            caption: 'Reference Documentation',
            description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
        };
        console.log(params);
        FB.ui(params, function(obj) { console.log(obj);});
    }

    function publishStoryFriend() {
        randNum = Math.floor ( Math.random() * friendIDs.length );

        var friendID = friendIDs[randNum];
        if (friendID == undefined){
            alert('please click the me button to get a list of friends first');
        }else{
            console.log("friend id: " + friendID );
            console.log('Opening a dialog for friendID: ', friendID);
            var params = {
                method: 'feed',
                to: friendID.toString(),
                name: 'Facebook Dialogs',
                link: 'https://developers.facebook.com/docs/reference/dialogs/',
                picture: 'http://fbrell.com/f8.jpg',
                caption: 'Reference Documentation',
                description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
            };
            FB.ui(params, function(obj) { console.log(obj);});
        }
    }

</script>
</body>
</html>
